<?php
/**
 * Generated by Haxe 4.0.0-rc.3+e3df7a448
 */

namespace tink\http;

use \php\_Boot\HxAnon;
use \tink\core\NamedWith;
use \php\Boot;
use \php\_Boot\HxString;
use \tink\http\_Header\HeaderValue_Impl_;
use \tink\http\_Header\HeaderName_Impl_;

class HeaderField extends NamedWith {
	/**
	 * @param string $s
	 * 
	 * @return HeaderField
	 */
	static public function ofString ($s) {
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:246: characters 19-33
		$_g = HxString::indexOf($s, ":");
		if ($_g === -1) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:248: characters 9-33
			return new HeaderField(HeaderName_Impl_::ofString($s), null);
		} else {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:251: characters 25-29
			$tmp = HeaderName_Impl_::ofString(mb_substr($s, 0, $_g));
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:251: characters 9-54
			return new HeaderField($tmp, trim(mb_substr($s, $_g + 1, null)));
		}
	}

	/**
	 * Constructs a Set-Cookie header. Please note that cookies are HttpOnly by default.
	 * You can opt out of that behavior by setting `options.scriptable` to true.
	 * 
	 * @param string $key
	 * @param string $value
	 * @param object $options
	 * 
	 * @return HeaderField
	 */
	static public function setCookie ($key, $value, $options = null) {
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:260: lines 260-261
		if ($options === null) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:261: characters 7-20
			$options = new HxAnon();
		}
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:263: characters 5-31
		$buf = new \StringBuf();
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:272: characters 5-55
		$buf->add((rawurlencode($key)??'null') . "=" . (rawurlencode($value)??'null'));
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:274: lines 274-275
		if ($options->expires !== null) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:275: characters 7-57
			$value1 = HeaderValue_Impl_::ofDate($options->expires);
			if ($value1 !== null) {
				$buf->add("; ");
				$buf->add("expires=");
				$buf->add($value1);
			}
		}
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:277: characters 5-39
		$value2 = $options->domain;
		if ($value2 !== null) {
			$buf->add("; ");
			$buf->add("domain=");
			$buf->add($value2);
		}

		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:278: characters 5-35
		$value3 = $options->path;
		if ($value3 !== null) {
			$buf->add("; ");
			$buf->add("path=");
			$buf->add($value3);
		}

		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:280: characters 5-46
		if ($options->secure) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:280: characters 25-46
			$buf->add("; ");
			$buf->add("secure");
			$buf->add("");
		}
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:281: characters 5-60
		if ($options->scriptable !== true) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:281: characters 37-60
			$buf->add("; ");
			$buf->add("HttpOnly");
			$buf->add("");
		}
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:283: characters 5-55
		return new HeaderField("set-cookie", $buf->b);
	}

	/**
	 * @param string $name
	 * @param string $value
	 * 
	 * @return void
	 */
	public function __construct ($name, $value) {
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:238: lines 238-285
		parent::__construct($name, $value);
	}

	/**
	 * @return string
	 */
	public function toString () {
		#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:242: lines 242-243
		if ($this->value === null) {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:242: characters 26-30
			return $this->name;
		} else {
			#C:/Users/VEgorov/AppData/Roaming/haxe/haxe_libraries/tink_http/0.8.2/haxelib/src/tink/http/Header.hx:243: characters 13-26
			return "" . ($this->name??'null') . ": " . ($this->value??'null');
		}
	}

	public function __toString() {
		return $this->toString();
	}
}

Boot::registerClass(HeaderField::class, 'tink.http.HeaderField');
