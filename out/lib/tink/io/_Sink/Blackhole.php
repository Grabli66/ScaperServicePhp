<?php
/**
 * Generated by Haxe 4.0.0-rc.3+e3df7a4
 */

namespace tink\io\_Sink;

use \tink\core\_Future\SyncFuture;
use \php\Boot;
use \tink\streams\StreamObject;
use \tink\streams\Handled;
use \tink\core\_Lazy\LazyConst;
use \tink\streams\_Stream\Handler_Impl_;
use \tink\io\PipeResult;
use \php\_Boot\HxException;
use \tink\core\_Future\FutureObject;
use \tink\io\SinkBase;

class Blackhole extends SinkBase {
	/**
	 * @var Blackhole
	 */
	static public $inst;

	/**
	 * @return void
	 */
	public function __construct () {
	}

	/**
	 * @param StreamObject $source
	 * @param object $options
	 * 
	 * @return FutureObject
	 */
	public function consume ($source, $options) {
		#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:66: lines 66-70
		return $source->forEach(Handler_Impl_::ofSafe(function ($_) {
			#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:66: characters 39-52
			return new SyncFuture(new LazyConst(Handled::Resume()));
		}))->map(function ($o) {
			#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:66: lines 66-70
			$__hx__switch = ($o->index);
			if ($__hx__switch === 0) {
				#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:68: characters 23-28
				throw new HxException("unreachable");
			} else if ($__hx__switch === 2) {
				#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:69: characters 23-38
				return PipeResult::SourceFailed($o->params[0]);
			} else if ($__hx__switch === 3) {
				#/home/grabli66/haxelib/tink_io/git/src/tink/io/Sink.hx:67: characters 22-32
				return PipeResult::AllWritten();
			}
		})->gather();
	}

	/**
	 * @internal
	 * @access private
	 */
	static public function __hx__init ()
	{
		static $called = false;
		if ($called) return;
		$called = true;


		self::$inst = new Blackhole();
	}
}

Boot::registerClass(Blackhole::class, 'tink.io._Sink.Blackhole');
Blackhole::__hx__init();
