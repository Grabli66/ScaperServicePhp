<?php
/**
 * Generated by Haxe 4.0.0-rc.3+e3df7a4
 */

namespace tink\json\_Writer;

use \php\Boot;
use \haxe\Utf8;

class StringWriter {
	/**
	 * @param string $s
	 * @param \StringBuf $buf
	 * 
	 * @return void
	 */
	static public function quote ($s, $buf) {
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:117: lines 117-120
		if (mb_strlen($s) !== Utf8::length($s)) {
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:118: characters 7-24
			StringWriter::quoteUtf8($s, $buf);
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:119: characters 7-13
			return;
		}
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:122: characters 5-26
		$buf->b = ($buf->b??'null') . (mb_chr(34)??'null');
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:123: characters 5-15
		$i = 0;
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:124: lines 124-142
		while (true) {
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:125: characters 7-46
			$c = \StringTools::fastCodeAt($s, $i++);
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:126: characters 7-39
			if ($c === 0) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:126: characters 34-39
				break;
			}
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:127: lines 127-141
			if ($c === 8) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:133: characters 15-29
				$buf->add("\\b");
			} else if ($c === 9) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:132: characters 23-37
				$buf->add("\\t");
			} else if ($c === 10) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:130: characters 23-37
				$buf->add("\\n");
			} else if ($c === 12) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:134: characters 16-30
				$buf->add("\\f");
			} else if ($c === 13) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:131: characters 23-37
				$buf->add("\\r");
			} else if ($c === 34) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:128: characters 22-36
				$buf->add("\\\"");
			} else if ($c === 92) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:129: characters 23-38
				$buf->add("\\\\");
			} else {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:139: characters 9-23
				$buf->b = ($buf->b??'null') . (mb_chr($c)??'null');
			}
		}
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:143: characters 5-26
		$buf->b = ($buf->b??'null') . (mb_chr(34)??'null');
	}

	/**
	 * @param string $s
	 * @param \StringBuf $buf
	 * 
	 * @return void
	 */
	static public function quoteUtf8 ($s, $buf) {
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:148: characters 5-29
		$u = new Utf8();
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:149: lines 149-159
		Utf8::iter($s, function ($c)  use (&$u) {
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:150: lines 150-158
			if ($c === 8) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:155: characters 15-35
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:155: characters 37-56
				$u->addChar(98);
			} else if ($c === 9) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:154: characters 23-43
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:154: characters 45-64
				$u->addChar(116);
			} else if ($c === 10) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:152: characters 23-43
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:152: characters 45-64
				$u->addChar(110);
			} else if ($c === 12) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:156: characters 16-36
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:156: characters 38-57
				$u->addChar(102);
			} else if ($c === 13) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:153: characters 23-43
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:153: characters 45-64
				$u->addChar(114);
			} else if ($c === 34 || $c === 92) {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:151: characters 33-53
				$u->addChar(92);
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:151: characters 55-67
				$u->addChar($c);
			} else {
				#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:157: characters 16-28
				$u->addChar($c);
			}
		});
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:160: characters 5-17
		$buf->add("\"");
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:161: characters 5-26
		$buf->add($u->toString());
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:162: characters 5-17
		$buf->add("\"");
	}

	/**
	 * @param string $v
	 * 
	 * @return string
	 */
	static public function stringify ($v) {
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:109: characters 5-32
		if ($v === null) {
			#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:109: characters 19-32
			return "null";
		}
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:110: characters 5-31
		$buf = new \StringBuf();
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:111: characters 5-18
		StringWriter::quote($v, $buf);
		#/home/grabli66/haxelib/tink_json/git/src/tink/json/Writer.hx:112: characters 5-26
		return $buf->b;
	}
}

Boot::registerClass(StringWriter::class, 'tink.json._Writer.StringWriter');
